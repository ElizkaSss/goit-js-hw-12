{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '50969769-837e1e35a02cf09097b5591db';\nconst URL = 'https://pixabay.com/api/';\n;\n\nexport async function getImagesByQuery(query, page = 1, perPage = 15) {\n    const response = await axios.get(URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: perPage,\n        }\n    })\n\n    return response.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst galleryContainer = document.querySelector('.gallery');\n\nexport function createGallery(images) {\n  const markup = images.map(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"image-info\">\n          <p><b>Likes</b> ${likes}</p>\n          <p><b>Views</b> ${views}</p>\n          <p><b>Comments</b> ${comments}</p>\n          <p><b>Downloads</b> ${downloads}</p>\n        </div>\n      </li>\n    `\n  ).join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\n\n\nconst loader = document.querySelector('#loader');\nloader.style.display = 'none';\n\nexport function showLoader() {\n  loader.style.display = 'block'; \n}\n\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\n\nconst loadMoreBtn = document.querySelector('#load-more-btn')\nloadMoreBtn.style.display = 'none';\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.style.display = 'none';\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\n\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    hideLoadMoreButton,\n    showLoadMoreButton,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst input = form.elements['search-text'];\n\nconst loadMoreBtn = document.querySelector('#load-more-btn');\n\nlet currentPage = 1;\nlet currentQuery = '';\nconst perPage = 15;\nlet totalHits = 0;\n\n\n//         'Search'\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    const query = input.value.trim();\n\n    if (!query) {\n        iziToast.warning({\n            message: 'Please enter a search term!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    currentQuery = query;\n    currentPage = 1;\n\n    clearGallery();\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage, perPage);\n        totalHits = data.totalHits;\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please, try again!',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        createGallery(data.hits);\n\n        if (totalHits > perPage) {\n            showLoadMoreButton();\n        }\n\n    } catch (err) {\n        console.error(err);\n        iziToast.error({\n            message: 'Oops! Something went wrong. Please try again later.',\n            position: 'topRight'\n        });\n    } finally {\n        hideLoader();\n    }\n});\n\n\n//               \"Load more\"\n\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage, perPage);\n        createGallery(data.hits);\n\n        scrollPage()\n\n        const loadedImages = document.querySelectorAll('.gallery-item').length;\n\n        if (loadedImages >= totalHits) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            })\n            hideLoadMoreButton();\n        } else {\n            showLoadMoreButton();\n        }\n    } catch (err) {\n        console.error(err);\n        iziToast.error({\n            message: 'Oops! Something went wrong. Please try again later.',\n            position: 'topRight'\n        });\n    } finally {\n        hideLoader();\n    }\n});\n\nfunction scrollPage() {\n    const { height: cardHeight } = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect();\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\n"],"names":["API_KEY","URL","getImagesByQuery","query","page","perPage","axios","lightbox","SimpleLightbox","galleryContainer","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","loader","showLoader","hideLoader","loadMoreBtn","showLoadMoreButton","hideLoadMoreButton","form","input","currentPage","currentQuery","totalHits","e","iziToast","data","err","scrollPage","cardHeight"],"mappings":"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"}